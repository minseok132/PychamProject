{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê±´ì˜í•¨ ì»¤ë®¤ë‹ˆí‹°</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
  <header class="bg-white shadow py-4 px-8 flex justify-between items-center">
    <div class="flex items-center gap-4">
      <a href="{% url 'calendar_app:calendar' %}">
        <img src="{% static 'images/cheongju_logo_01.png' %}" alt="ì²­ì£¼ëŒ€ ë¡œê³ " class="h-12">
      </a>
      <h1 class="text-xl font-bold text-gray-800">ê±´ì˜í•¨ ì»¤ë®¤ë‹ˆí‹°</h1>
    </div>
  </header>

  <main class="flex-grow container mx-auto px-4 py-8">
    <!-- ì •ë ¬ ë²„íŠ¼ -->
    <div class="flex justify-center space-x-2 mb-6">
      <a href="?sort=latest" class="px-3 py-1 rounded border {% if current_sort == 'latest' %}bg-blue-600 text-white{% else %}bg-gray-200 text-gray-800{% endif %}">ìµœì‹ ìˆœ</a>
      <a href="?sort=oldest" class="px-3 py-1 rounded border {% if current_sort == 'oldest' %}bg-blue-600 text-white{% else %}bg-gray-200 text-gray-800{% endif %}">ê³¼ê±°ìˆœ</a>
      <a href="?sort=recommend" class="px-3 py-1 rounded border {% if current_sort == 'recommend' %}bg-blue-600 text-white{% else %}bg-gray-200 text-gray-800{% endif %}">ì¶”ì²œìˆœ</a>
    </div>

    <!-- ê±´ì˜ ì‘ì„± ë²„íŠ¼ -->
    <div class="flex justify-center mb-6">
      <a href="{% url 'submit_suggestion' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">ê±´ì˜ ì‘ì„±</a>
    </div>

    <!-- ê²Œì‹œê¸€ ëª©ë¡ -->
      <div class="max-w-2xl mx-auto space-y-4">
          {% for s in page_obj %}
              <div class="bg-white p-4 rounded shadow">
                  <h4 class="text-lg font-semibold">
                      <a href="{% url 'suggestion_detail' s.pk %}"
                         class="hover:underline">{{ s.title|default:"[ì œëª©ì—†ìŒ]" }}</a>
                  </h4>
                  <p class="mt-2 text-gray-700">{{ s.content|linebreaksbr }}</p>
                  <div class="mt-2 text-sm text-gray-500 flex flex-wrap gap-4">
                      <span>ğŸ•“ {{ s.created_at|date:"Y-m-d H:i" }}</span>
                      <span>âœ {{ s.author.profile.nickname|default:s.author.username }}</span>
                      <span>ğŸ‘ ì¶”ì²œìˆ˜: {{ s.recommend_count }}</span>
                  </div>
              </div>
          {% empty %}
              <p class="text-center text-gray-500">ì œì¶œëœ ê±´ì˜ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
          {% endfor %}
      </div>


      <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
    <div class="mt-8 flex justify-center space-x-2">
      {% if page_obj.has_previous %}
        <a href="?page=1{% if current_sort %}&sort={{ current_sort }}{% endif %}" class="text-blue-600 hover:underline">ì²˜ìŒ</a>
        <a href="?page={{ page_obj.previous_page_number }}{% if current_sort %}&sort={{ current_sort }}{% endif %}" class="text-blue-600 hover:underline">ì´ì „</a>
      {% endif %}

      {% with page_range=page_obj.paginator.page_range %}
        {% for num in page_range %}
          {% if num >= page_obj.number|add:'-2' and num <= page_obj.number|add:'2' %}
            {% if page_obj.number == num %}
              <span class="font-semibold text-blue-600">{{ num }}</span>
            {% else %}
              <a href="?page={{ num }}{% if current_sort %}&sort={{ current_sort }}{% endif %}" class="text-blue-600 hover:underline">{{ num }}</a>
            {% endif %}
          {% endif %}
        {% endfor %}
      {% endwith %}

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}{% if current_sort %}&sort={{ current_sort }}{% endif %}" class="text-blue-600 hover:underline">ë‹¤ìŒ</a>
        <a href="?page={{ page_obj.paginator.num_pages }}{% if current_sort %}&sort={{ current_sort }}{% endif %}" class="text-blue-600 hover:underline">ë§ˆì§€ë§‰</a>
      {% endif %}
    </div>

    <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼ -->
    <div class="mt-8 text-center">
      <a href="/" class="text-purple-700 underline text-sm hover:text-purple-900">â† í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
  </main>

  <!-- í‘¸í„° -->
  <footer class="bg-white text-center py-4 text-xs text-gray-500 border-t">
    &copy; 2025 ì²­ì£¼ëŒ€í•™êµ ê±´ì˜í•¨ ì»¤ë®¤ë‹ˆí‹°
  </footer>
</body>
</html>
